<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>THE KRIPPER Digital Archive</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Great+Vibes&family=Inter:wght@300;600;800&display=swap" rel="stylesheet">
  <style>
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, Arial, sans-serif;background:#f6f2ed;color:#1b1b1b}
    :root{--accent:#6b4f3a;--paper:#fffdf6;}
    body{background-image: linear-gradient(180deg, rgba(241,236,227,0.6), rgba(230,244,236,0.35)), url('PRAKARSA/Background.png');background-size:cover;background-position:center;}
    .container{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4vw}
    .site-title{font-family:'Playfair Display', serif;font-weight:900;letter-spacing:2px;font-size:clamp(28px,6vw,64px);text-align:center;color:var(--accent);margin:0}
    .subtitle{font-family:'Inter',sans-serif;font-weight:600;margin-top:6px;color:#3b3b3b}
    .choices{display:flex;gap:24px;margin-top:28px}
    .choice{background:linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.7));padding:28px 36px;border-radius:20px;box-shadow:0 8px 30px rgba(15,20,15,0.12);cursor:pointer;backdrop-filter: blur(6px);border:1px solid rgba(107,79,58,0.08)}
    .choice .label{font-family:'Great Vibes', cursive;font-size:clamp(20px,3.5vw,34px);display:block;color:var(--accent);text-align:center}
    .choice .desc{font-size:12px;color:#666;margin-top:6px;text-align:center}
    .panel{position:fixed;inset:0;background:rgba(0,0,0,0.35);backdrop-filter: blur(6px);display:none;align-items:center;justify-content:center;padding:32px}
    .panel.open{display:flex}
    .panel .content{width:100%;max-width:1200px;background:var(--paper);border-radius:16px;padding:18px;box-shadow:0 30px 60px rgba(10,10,10,0.25);overflow:hidden}
    .panel .topbar{display:flex;align-items:center;justify-content:space-between;padding:8px 12px}
    .btn-close{background:transparent;border:0;font-size:18px;cursor:pointer}
    .book-view{display:flex;gap:24px;align-items:flex-start}
    .book-left{flex:0 0 60%;padding:12px;background:linear-gradient(180deg,#fffdf6,#f7f4ee);border-radius:12px}
    .book-right{flex:1;padding:12px}
    .book{width:100%;height:520px;position:relative;perspective:1800px}
    .page{width:100%;height:100%;position:absolute;top:0;left:0;border-radius:10px;overflow:hidden;box-shadow:0 8px 30px rgba(30,20,10,0.12);background:#fff;transform-origin:left center;transform:rotateY(0deg);transition:transform 900ms cubic-bezier(.2,.9,.3,1), box-shadow 350ms}
    .page .inner{width:100%;height:100%;display:flex;align-items:center;justify-content:center}
    .page img{width:100%;height:100%;object-fit:cover;aspect-ratio:3/4}
    .page.flipped{transform: rotateY(-170deg);box-shadow: 0 60px 120px rgba(2,5,10,0.45)}
    .controls{display:flex;gap:12px;margin-top:12px}
    .controls button{padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:#fff;cursor:pointer}
    .audiobar{display:inline-flex;gap:3px;align-items:flex-end;height:18px}
    .audiobar span{display:block;width:4px;height:6px;background:#222;opacity:0.9;border-radius:2px;animation:bar 900ms infinite ease-in-out}
    .audiobar span:nth-child(2){animation-delay:120ms}
    .audiobar span:nth-child(3){animation-delay:240ms}
    .audiobar span:nth-child(4){animation-delay:60ms}
    @keyframes bar{0%{height:5px}50%{height:16px}100%{height:6px}}

    /* Polaroid Gallery */
    .gallery{height:85vh;overflow:hidden;padding:28px;border-radius:12px;background:linear-gradient(180deg,#f7f5f0,#eaf4f8);position:relative}
    .polaroids{display:flex;flex-direction:column;align-items:center;gap:24px;animation:scrollDown 40s linear infinite}
    @keyframes scrollDown{0%{transform:translateY(0)}100%{transform:translateY(-50%)}}
    .polaroid{width:240px;padding:12px;border-radius:14px;box-shadow:0 12px 30px rgba(20,20,20,0.2);display:flex;flex-direction:column;align-items:center;animation:floaty 6s ease-in-out infinite}
    .polaroid img{width:100%;height:180px;object-fit:cover;border-radius:8px}
    .polaroid .cap{margin-top:8px;font-size:13px;color:#333}
    @keyframes floaty{0%{transform:translateY(0) rotate(-1deg)}50%{transform:translateY(-8px) rotate(1deg)}100%{transform:translateY(0) rotate(-1deg)}}

    footer{padding:28px 12px;text-align:center;font-family:'Times New Roman', Times, serif;color:#222}
    footer .credits{font-size:14px;margin-bottom:8px}
    footer .quote{font-size:16px;font-style:italic;font-weight:700}
    @media (max-width:900px){.book-left{flex:1}.book-right{display:none}.book{height:420px}}
  </style>
</head>
<body>
  <main class="container">
    <h1 class="site-title">THE KRIPPER Digital Archive</h1>
    <div class="subtitle">A visual and sonic anthology</div>
    <div class="choices">
      <div class="choice" id="opt1"><span class="label">Digital Journal Song</span><span class="desc">8 slide — pengalaman buka-buku & suara tersembunyi</span></div>
      <div class="choice" id="opt2"><span class="label">Galeri Prakarsa'25</span><span class="desc">18 karya — album bergaya polaroid yang mengambang</span></div>
    </div>
  </main>

  <!-- Panel 1 -->
  <div class="panel" id="panel1">
    <div class="content">
      <div class="topbar">
        <div><strong style="font-family:Playfair Display,serif;font-size:18px">Digital Journal Song</strong></div>
        <button class="btn-close" data-close="panel1">✕</button>
      </div>
      <div class="book-view">
        <div class="book-left">
          <div class="book" id="book">
            <div class="page"><div class="inner"><img src="PRAKARSA/Journal1.jpg"></div></div>
            <div class="page"><div class="inner"><img src="PRAKARSA/Journal2.jpg"></div></div>
            <div class="page"><div class="inner"><img src="PRAKARSA/Journal3.jpg"></div></div>
            <div class="page"><div class="inner"><img src="PRAKARSA/Journal4.jpg"></div></div>
            <div class="page"><div class="inner"><img src="PRAKARSA/Journal5.jpg"></div></div>
            <div class="page"><div class="inner"><img src="PRAKARSA/Journal6.jpg"></div></div>
            <div class="page"><div class="inner"><img src="PRAKARSA/Journal7.jpg"></div></div>
            <div class="page"><div class="inner"><img src="PRAKARSA/Journal8.jpg"></div></div>
          </div>
          <div class="controls">
            <button id="prevPage">◀ Previous</button>
            <button id="nextPage">Next ▶</button>
            <div style="margin-left:16px;display:flex;align-items:center;gap:10px">
              <div style="font-size:13px;color:#4b4b4b">Audio</div>
              <div class="audiobar" id="visualizer"><span></span><span></span><span></span><span></span></div>
            </div>
          </div>
        </div>
        <aside class="book-right">
          <div class="thumbs" id="thumbs">
            <img src="Journal1.jpg" data-target="1"/>
            <img src="PRAKARSA/Journal2.jpg" data-target="2"/>
            <img src="PRAKARSA/Journal3.jpg" data-target="3"/>
            <img src="PRAKARSA/Journal4.jpg" data-target="4"/>
            <img src="PRAKARSA/Journal5.jpg" data-target="5"/>
            <img src="PRAKARSA/Journal6.jpg" data-target="6"/>
            <img src="PRAKARSA/Journal7.jpg" data-target="7"/>
            <img src="PRAKARSA/Journal8.jpg" data-target="8"/>
          </div>
        </aside>
      </div>
      <!-- Audio (mulai muted biar autoplay aman) -->
      <audio id="audio2" src="Virgoun-SuratCintaUntukStarla.mp3" preload="auto" muted></audio>
      <audio id="audio3" src="PRAKARSA/Nuh-TeruntukMia.mp3" preload="auto" muted></audio>
      <audio id="audio4" src="PRAKARSA/Jaz-Bersamamu.mp3" preload="auto" muted></audio>
      <audio id="audio5" src="PRAKARSA/Yungkai-blue.mp3" preload="auto" muted></audio>
      <audio id="audio6" src="PRAKARSA/StephaniePoetri-ILoveYou3000.mp3" preload="auto" muted></audio>
      <audio id="audio7" src="PRAKARSA/NadhifBasalamah-bergemasampaiselamanya.mp3" preload="auto" muted></audio>
    </div>
  </div>

  <!-- Panel 2 -->
  <div class="panel" id="panel2">
    <div class="content">
      <div class="topbar">
        <div><strong style="font-family:Playfair Display,serif;font-size:18px">Galeri PRAKARSA'25</strong></div>
        <button class="btn-close" data-close="panel2">✕</button>
      </div>
      <div class="gallery">
        <div class="polaroids" id="polaroidContainer"></div>
      </div>
    </div>
  </div>

  <footer>
    <div class="credits">Produced by: Wulandari, Nassa Niswatun, Arum Kamalia Muktaf, Muthia Alya Mukhbita, Meilina Zalzabila, Bening Shofiatul Khoir, Sofi Hijri Badrun.</div>
    <div class="quote">"Ini bukti bahwa santri juga bisa untuk <strong>MEMAJUKAN NEGRI</strong>"</div>
  </footer>

  <script>
    // Panel open/close
    document.getElementById('opt1').onclick=()=>openPanel('panel1');
    document.getElementById('opt2').onclick=()=>openPanel('panel2');
    document.querySelectorAll('.btn-close').forEach(b=>b.onclick=()=>closePanel(b.dataset.close));
    function openPanel(id){document.getElementById(id).classList.add('open')}
    function closePanel(id){document.getElementById(id).classList.remove('open');document.querySelectorAll('audio').forEach(a=>{a.pause();a.currentTime=0})}

    // --- Book flipping logic ---
    (function(){
      const pages = Array.from(document.querySelectorAll('#book .page'));
      pages.forEach((p,i)=>{p.style.zIndex = pages.length - i});

      let current = 0;
      const prevBtn = document.getElementById('prevPage');
      const nextBtn = document.getElementById('nextPage');

      // ✅ audioMap di atas
      const audioMap = {
        2: document.getElementById('audio2'),
        3: document.getElementById('audio3'),
        4: document.getElementById('audio4'),
        5: document.getElementById('audio5'),
        6: document.getElementById('audio6'),
        7: document.getElementById('audio7')
      };

      function updateButtons(){
        prevBtn.disabled = (current===0);
        nextBtn.disabled = (current>=pages.length-1);
      }

      function onPageChange(pageNumber){
        Object.values(audioMap).forEach(a=>{if(a){a.pause();a.currentTime=0}});
        const a = audioMap[pageNumber];
        if(a){
          a.muted = false; // 🔊 unmute saat user klik
          a.play().catch(err=>console.warn('Autoplay blocked:',err));
          document.getElementById('visualizer').style.opacity = 1;
        } else {
          document.getElementById('visualizer').style.opacity = 0.4;
        }
      }

      function flipTo(index){
        current = Math.max(0, Math.min(index, pages.length-1));
        for(let i=0;i<pages.length;i++){
          if(i<current) pages[i].classList.add('flipped');
          else pages[i].classList.remove('flipped');
        }
        updateButtons();
        onPageChange(current+1);
      }

      nextBtn.onclick=()=>flipTo(current+1);
      prevBtn.onclick=()=>flipTo(current-1);

      document.getElementById('thumbs').onclick=(e)=>{
        const img=e.target.closest('img');
        if(img) flipTo(Number(img.dataset.target)-1);
      };

      flipTo(0);
    })();

    // --- Gallery polaroids ---
    (function(){
      const container = document.getElementById('polaroidContainer');
      const total = 18;
      for(let i=1;i<=total;i++){
        const card = document.createElement('figure');
        card.className = 'polaroid float';
        const img = document.createElement('img'); 
        img.src = `PRAKARSA/pola-${i}.jpg`;  // gunakan folder PRAKARSA
        img.alt = `pola-${i}`;
        const cap = document.createElement('figcaption'); 
        cap.className='cap'; 
        cap.textContent = `PRK ${i}`;
        card.appendChild(img); 
        card.appendChild(cap);
        container.appendChild(card);
      }
    })();
  </script>
</body>
</html>
